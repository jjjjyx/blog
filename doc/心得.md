# 心得

觉得程序员还是得写的点东西，怎么说么，好记性不如烂笔头嘛，虽然说已经通过一系列的搜索，找出了解决方案。
但是难免以后会忘记。而且我是一个记性不好的人，也不是不好，是记的抽象。我只记得有这么个东西但是细节全都不知道，下次用起来还得重新上网查资料。所以写下这个。

> 随便说点

## 关于博客在搭建中遇到的问题
1. 一个vue 样式无法加载的问题

    webpack 打包完成后报运行静态页面报如下错误。

    ![](http://oht47c0d0.bkt.clouddn.com/16-12-11/90573627-file_1481417821670_a349.png)

    逐行查看错误堆栈信息：发现如下
    ![](http://oht47c0d0.bkt.clouddn.com/16-12-11/32416642-file_1481418059047_e978.png)
    在加载这个test.vue 模板的时候style 无法被解析
    查看源代码 发现并无错误后开始思考。
    样式无法解析，没有调用相应的loader 查看webpack-config.js

    代码片段：
    ```js
    module: {
        // 加载器
        loaders: [
            // 解析.vue文件
            {
                test: /\.vue$/,
                loader: 'vue',
                include: path.join(__dirname, './client/public/view'),
            },
            // 转化ES6的语法
            {
                test: /\.js$/,
                loader: 'babel',
                include: path.join(__dirname, './client/public'),
            },
            // 编译css并自动添加css前缀
            {
                test: /\.css$/,
                // loader: 'style!css',
                loader: ExtractTextPlugin.extract('style-loader','css-loader!postcss-loader'),
            },
            // 自动编译 less 文件
            {
                test: /\.less$/,
                // loader: "style!css!postcss!less?sourceMap",
                loader: ExtractTextPlugin.extract('style-loader', 'css-loader!postcss-loader!less-loader'),
                include: path.join(__dirname, './client/public/css'),
            },
            // 其他略
        ]
    }
    // 插件
    plugins: [
        new webpack.optimize.CommonsChunkPlugin({
            name: 'vendor',
            minChunks: function (module, count) {
                // any required modules inside node_modules are extracted to vendor
                return module.resource && /\.(js|css)$/.test(module.resource) && module.resource.indexOf(path.join(__dirname, './node_modules')) === 0
            }
        }),
        new ExtractTextPlugin('static/css/[name].css'),
        new HtmlWebpackPlugin({
            // 生成出来的html文件名
            filename: 'index.html',
            // 每个html的模版，这里多个页面使用同一个模版
            template: './client/view/index.html',
            // 自动将引用插入html
            inject: true,
            // 每个html引用的js模块，也可以在这里加上vendor等公用模块
            chunks: ['main', 'vendor']
        })
    ]
    ```
    因为想将外部依赖的css 分离出来，使用了ExtractTextPlugin 进行加载
    那现在这里出现问题 就得找ExtractTextPlugin插件的配置说明。
    [Webpack 常见静态资源处理 - 模块加载器（Loaders）+ExtractTextPlugin插件](http://www.cnblogs.com/sloong/p/5826818.html)

    其中注意到有这么一项

    ```
    new ExtractTextPlugin([id: string], filename: string, [options])
    ```
    * `options`
        * `allChunks` extract from all additional chunks too (by default it extracts only from the initial chunk(s))
        * `disable` disables the plugin

    修改webpack-config.js 配置：
    ```js
    new ExtractTextPlugin('static/css/[name].css',{
        allChunks:true
    }),
    ```

    再次运行webpack 查看页面已经完成预想效果
    ![](http://oht47c0d0.bkt.clouddn.com/16-12-11/98597378-file_1481419175564_1fe5.png)
2.
